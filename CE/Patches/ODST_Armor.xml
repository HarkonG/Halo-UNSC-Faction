<?xml version="1.0" encoding="utf-8"?>

<Patch>

    <Operation Class="PatchOperationFindMod">
        <mods>
            <li>Combat Extended</li>
        </mods>
        <match Class="PatchOperationSequence">
            <operations>

                <!-- Helmet -->
                <li Class="PatchOperationAdd">
                    <xpath>Defs/ThingDef[defName="HALO_UNSC_ODSTHelmet"]/statBases</xpath>
                    <value>
                        <Bulk>6</Bulk>
                        <WornBulk>1</WornBulk>
                    </value>
                </li>

                <li Class="PatchOperationReplace">
                    <xpath>Defs/ThingDef[defName="HALO_UNSC_ODSTHelmet"]/statBases/Flammability</xpath>
                    <value>
                        <Flammability>0</Flammability>
                    </value>
                </li>

                <li Class="PatchOperationReplace">
                    <xpath>Defs/ThingDef[defName="HALO_UNSC_ODSTHelmet"]/statBases/MaxHitPoints</xpath>
                    <value>
                        <MaxHitPoints>260</MaxHitPoints>
                    </value>
                </li>

                <li Class="PatchOperationReplace">
                    <xpath>Defs/ThingDef[defName="HALO_UNSC_ODSTHelmet"]/statBases/ArmorRating_Sharp</xpath>
                    <value>
                        <ArmorRating_Sharp>22</ArmorRating_Sharp>
                    </value>
                </li>

                <li Class="PatchOperationReplace">
                    <xpath>Defs/ThingDef[defName="HALO_UNSC_ODSTHelmet"]/statBases/ArmorRating_Blunt</xpath>
                    <value>
                        <ArmorRating_Blunt>50</ArmorRating_Blunt>
                    </value>
                </li>

                <li Class="PatchOperationAdd">
                    <xpath>Defs/ThingDef[defName="HALO_UNSC_ODSTHelmet"]/equippedStatOffsets</xpath>
                    <value>
                        <PsychicSensitivity>-0.2</PsychicSensitivity>
                        <AimingAccuracy>0.15</AimingAccuracy>
                        <ToxicSensitivity>-0.50</ToxicSensitivity>
                        <SmokeSensitivity>-1</SmokeSensitivity>
                    </value>
                </li>                

                <li Class="PatchOperationAdd">
                    <xpath>Defs/ThingDef[defName="HALO_UNSC_ODSTHelmet"]/apparel/layers</xpath>
                    <value>
                        <li>OnHead</li>
                        <li>StrappedHead</li>                        
                    </value>
                </li>

                <!-- Armor -->
                <li Class="PatchOperationAdd">
                    <xpath>Defs/ThingDef[defName="HALO_UNSC_ODSTArmor"]/statBases</xpath>
                    <value>
                        <Bulk>100</Bulk>
                        <WornBulk>15</WornBulk>
                    </value>
                </li>

                <li Class="PatchOperationReplace">
                    <xpath>Defs/ThingDef[defName="HALO_UNSC_ODSTArmor"]/statBases/MaxHitPoints</xpath>
                    <value>
                        <MaxHitPoints>600</MaxHitPoints>
                    </value>
                </li>

                <li Class="PatchOperationReplace">
                    <xpath>Defs/ThingDef[defName="HALO_UNSC_ODSTArmor"]/statBases/Mass</xpath>
                    <value>
                        <Mass>80</Mass>
                    </value>
                </li>

                <li Class="PatchOperationReplace">
                    <xpath>Defs/ThingDef[defName="HALO_UNSC_ODSTArmor"]/statBases/Flammability</xpath>
                    <value>
                        <Flammability>0</Flammability>
                    </value>
                </li>

                <li Class="PatchOperationReplace">
                    <xpath>Defs/ThingDef[defName="HALO_UNSC_ODSTArmor"]/statBases/ArmorRating_Sharp</xpath>
                    <value>
                        <ArmorRating_Sharp>28</ArmorRating_Sharp>
                    </value>
                </li>

                <li Class="PatchOperationReplace">
                    <xpath>Defs/ThingDef[defName="HALO_UNSC_ODSTArmor"]/statBases/ArmorRating_Blunt</xpath>
                    <value>
                        <ArmorRating_Blunt>60</ArmorRating_Blunt>
                    </value>
                </li>

                <li Class="PatchOperationAdd">
                    <xpath>Defs/ThingDef[defName="HALO_UNSC_ODSTArmor"]/equippedStatOffsets</xpath>
                    <value>
                        <CarryWeight>80</CarryWeight>
                        <CarryBulk>20</CarryBulk>
                        <ShootingAccuracyPawn>0.15</ShootingAccuracyPawn>
                        <ToxicSensitivity>-0.50</ToxicSensitivity>
                    </value>
                </li>

            </operations>
        </match>
    </Operation>
</Patch>